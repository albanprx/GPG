CFLAGS = -std=c11 -Wall -Wextra -Werror
CPPFLAGS = -I../include/
LDLIBS = -lm -lgpgme

all: GPG

GPG: main.o generation.o cipher.o signature.o decipher.o verification.o import.o export.o
	gcc -g $(CFLAGS) $(LDFLAGS) -o GPG main.o generation.o cipher.o signature.o decipher.o verification.o import.o export.o $(LDLIBS)

main.o: main.c
	gcc -g $(CFLAGS) $(CPPFLAGS) -c main.c

gpg.o: generation.c
	gcc -g $(CFLAGS) $(CPPFLAGS) -c generation.c

cipher.o: cipher.c
	gcc -g $(CFLAGS) $(CPPFLAGS) -c cipher.c

signature.o: signature.c
	gcc -g $(CFLAGS) $(CPPFLAGS) -c signature.c

decipher.o: decipher.c
	gcc -g $(CFLAGS) $(CPPFLAGS) -c decipher.c

verification.o: verification.c
	gcc -g $(CFLAGS) $(CPPFLAGS) -c verification.c

import.o: import.c
	gcc -g $(CFLAGS) $(CPPFLAGS) -c import.c

export.o: export.c
	gcc -g $(CFLAGS) $(CPPFLAGS) -c export.c

debug: CFLAGS += -g
debug: all

clean:
	@rm -f *.o GPG

help:
	@echo "Usage :"
	@echo "make all   :  Generate the GPG file from the source files"
	@echo "make clean :  Remove all temporary files and binary file generated by the compilation."
	@echo "make help  :  Display this help"

.PHONY: all clean help